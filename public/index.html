<!DOCTYPE html>
<html>

<head lang="en">
    <meta charset="UTF-8">
    <title>在线聊天室</title>
    <link href="http://cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="./styles/app.css" />
    <script src="http://libs.baidu.com/jquery/2.0.0/jquery.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script src="//cdn.bootcss.com/angular.js/1.4.3/angular.min.js"></script>
    <!-- Source files -->
    <script src="src/app.js"></script>
    <!-- GAME -->
    <script src="src/factories/boardTileFactory.js"></script>
    <script src="src/factories/gameFactory.js"></script>
    <!-- MULTIPLAYER -->
    <script src="src/factories/colorFactory.js"></script>
    <script src="src/factories/userFactory.js"></script>
    <script src="src/factories/socketFactory.js"></script>
    <script src="src/scrabbleController.js"></script>
</head>

<body ng-app="scrbRoom" ng-controller="scrbCtrl" ng-init='setup()'>
    <!-- chat room -->

    <!-- <div class='container'> -->
    <!-- <% include dashboard %> -->
    <!-- <div class="row"> -->
    <!-- <div class="col-md-8"> -->
    <!-- <% include board %> -->
    <!-- </div> -->
    <!-- <div class="col-md-4"> -->
    <!-- <% include history %> -->
    <!-- </div> -->
    <!-- </div> -->
    <!-- </div> -->
    <div class="chat-room-wrapper" ng-show="hasLogined">
        <div class="chat-room panel panel-success">
            <table class="tg">
                <tr ng-repeat="x in loops">
                    <td class="board-tiles" ng-repeat="y in loops">
                        <div>
                            <img id="img{{ x + '-' + y }}"
                                 ng-src="/images/tiles/{{ tile(x, y) }}.png"
                                 ng-class="showBoardTiles(x, y)"
                            />
                            <!--ng-class='scrbCtrl.showBoardTiles(<%= x %>, <%= y %>)' -->
                            <!--ng-src="/images/tiles/{{ tile(x, y) }}.png"-->
                            <!--ng-click='scrbCtrl.selectTile(<%= x %>, <%= y %>)'>-->
                            <!--/>-->
                        </div>
                    </td>
                </tr>
            </table>
        </div>
        <!-- <div class="online panel panel-success">
            <div class="panel-heading">
                <h3 class="panel-title">在线<span class="user-number">{{users.length-1}}</span></h3>
            </div>
            <div class="user-wrapper panel-body">
                <user iscurrentreceiver="receiver===user.nickname" info="user" ng-click="setReceiver(user.nickname)"
                    ng-repeat="user in users"></user>
            </div>
        </div> -->
        <!-- <div class="chat-room panel panel-success"> -->
        <div class="online panel panel-success">
            <div class="panel-heading">
                <h3 class="panel-title">{{receiver?receiver:"群聊"}}<span class="user-number">{{users.length-1}}</span>
                </h3>
            </div>
            <div class="message-wrapper panel-body">
                <message self="nickname" scrolltothis="scrollToBottom()" info="message" ng-repeat="message in messages">
                </message>
            </div>
            <div class="panel-footer">
                <form class="post-form form-inline" novalidate name="postform" ng-submit="postMessage()">
                    <input type="text" class="form-control" ng-model="words" placeholder="说点什么呗" required>
                    <button type="submit" class="btn btn-success" ng-disabled="postform.$invalid">发送</button>
                </form>
            </div>
        </div>
    </div>

    <!-- end of chat room -->

    <!-- login form -->
    <div class="userform-wrapper" ng-show="!hasLogined">
        <form class="form-inline login" novalidate name="userform" ng-submit="login()">
            <div class="form-group">
                <label for="nickname" class="sr-only"></label>
                <div class="input-group">
                    <div class="input-group-addon"><span class="glyphicon glyphicon-user"></span></div>
                    <input type="text" class="form-control" id="nickname" placeholder="Your Nickname"
                        ng-model="nickname" required />
                </div>
            </div>
            <button type="submit" class="btn btn-primary" ng-disabled="userform.$invalid">LOG IN</button>
            <p ng-show="userExisted" class="help-block">A user with this nickname already exists.</p>

        </form>
    </div>
    <!-- end of login form -->

</body>

</html>